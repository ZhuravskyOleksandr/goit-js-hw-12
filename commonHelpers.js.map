{"version":3,"file":"commonHelpers.js","sources":["../src/helpers.js","../src/main.js"],"sourcesContent":["const loadMoreBtn = document.querySelector('#load-more');\nconst loader = document.querySelector('#loader');\n\nfunction showLoadMoreBtn() {\n  return loadMoreBtn.classList.replace('hidden', 'load-more');\n}\n\nfunction hideLoadMoreBtn() {\n  return loadMoreBtn.classList.replace('load-more', 'hidden');\n}\n\nfunction showLoader() {\n    return loader.classList.add('loader');\n}\n\nfunction hideLoader() {\n    return loader.classList.remove('loader');\n}\n\nexport { loadMoreBtn, showLoadMoreBtn, hideLoadMoreBtn, showLoader, hideLoader };","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nimport * as helpers from \"./helpers\";\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst galleryList = document.querySelector('.gallery-list');\n\nsearchForm.addEventListener('submit', searchImages);\nhelpers.loadMoreBtn.addEventListener('click', loadMore);\n\nlet lightbox;\nlet page = 1;\nlet per_page = 40;\nlet searchQuery = '';\n\nasync function searchImages(event) {\n    event.preventDefault();\n    galleryList.innerHTML = '';\n    helpers.showLoader();\n    helpers.hideLoadMoreBtn();\n    page = 1;\n    searchQuery = searchInput.value;\n    \n  try {\n    const data = await serviceImages(searchQuery);\n    if (data.hits.length === 0) {\n      throw new Error('Sorry, there are no images matching your search query. Please try again!');\n    }\n\n    galleryList.innerHTML = createMarkup(data.hits);\n    lightbox = new SimpleLightbox('.gallery-link', {\n            captionsData: 'alt',\n            captionDelay: 250,\n            });\n    lightbox.refresh();\n    helpers.showLoadMoreBtn();\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      message: error.message,\n      position: \"topRight\",\n    });\n    helpers.hideLoadMoreBtn();\n  } finally {\n    searchForm.reset();\n    helpers.hideLoader();\n  }\n};\n\nasync function loadMore() {\n  page++;\n  helpers.hideLoadMoreBtn();\n  helpers.showLoader();\n\n  try {\n    const data = await serviceImages(searchQuery);\n    galleryList.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    lightbox.refresh();\n    helpers.showLoadMoreBtn();\n\n    const li = galleryList.firstElementChild;\n    const liCoordinates = li.getBoundingClientRect();\n\n    window.scrollBy({\n      top: liCoordinates.height * 2,\n      behavior: 'smooth',\n    });\n    \n    if (page * per_page > data.totalHits) {\n      throw new Error('We\\'re sorry, but you\\'ve reached the end of search results.');\n    }\n  } catch (error) {\n    helpers.hideLoadMoreBtn();\n      iziToast.info({\n        title: '',\n        message: error.message,\n        position: 'topRight',\n      });\n  } finally {\n    helpers.hideLoader();\n  }\n}\n\nasync function serviceImages(query) {\n    const API_KEY = '14812482-32fb1dc9e3056dda489954fb4';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const response = await axios(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page,\n            page,\n        }\n    });\n    return response.data;\n};\n\nfunction createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n          <li class=\"gallery-item\">\n        <div class=\"img-wrapper\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n            class=\"gallery-img\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            width=\"360\"\n            height=\"200\"\n          />\n          </a>\n        </div>\n        <div class=\"info-wrapper\">\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Likes</h3>\n            <p class=\"info-text\">${likes}</p>\n          </div>\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Views</h3>\n            <p class=\"info-text\">${views}</p>\n          </div>\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Comments</h3>\n            <p class=\"info-text\">${comments}</p>\n          </div>\n          <div class=\"info-block\">\n            <h3 class=\"info-caption\">Downloads</h3>\n            <p class=\"info-text\">${downloads}</p>\n          </div>\n        </div>\n      </li>`).join('');\n};"],"names":["loadMoreBtn","loader","showLoadMoreBtn","hideLoadMoreBtn","showLoader","hideLoader","searchForm","searchInput","galleryList","searchImages","helpers.loadMoreBtn","loadMore","lightbox","page","per_page","searchQuery","event","helpers.showLoader","helpers.hideLoadMoreBtn","data","serviceImages","createMarkup","SimpleLightbox","helpers.showLoadMoreBtn","error","iziToast","helpers.hideLoader","liCoordinates","query","axios","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAAA,MAAMA,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASC,GAAkB,CACzB,OAAOF,EAAY,UAAU,QAAQ,SAAU,WAAW,CAC5D,CAEA,SAASG,GAAkB,CACzB,OAAOH,EAAY,UAAU,QAAQ,YAAa,QAAQ,CAC5D,CAEA,SAASI,GAAa,CAClB,OAAOH,EAAO,UAAU,IAAI,QAAQ,CACxC,CAEA,SAASI,GAAa,CAClB,OAAOJ,EAAO,UAAU,OAAO,QAAQ,CAC3C,CCTA,MAAMK,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAc,SAAS,cAAc,eAAe,EAE1DF,EAAW,iBAAiB,SAAUG,CAAY,EAClDC,EAAoB,iBAAiB,QAASC,CAAQ,EAEtD,IAAIC,EACAC,EAAO,EACPC,EAAW,GACXC,EAAc,GAElB,eAAeN,EAAaO,EAAO,CAC/BA,EAAM,eAAc,EACpBR,EAAY,UAAY,GACxBS,IACAC,IACAL,EAAO,EACPE,EAAcR,EAAY,MAE5B,GAAI,CACF,MAAMY,EAAO,MAAMC,EAAcL,CAAW,EAC5C,GAAII,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,0EAA0E,EAG5FX,EAAY,UAAYa,EAAaF,EAAK,IAAI,EAC9CP,EAAW,IAAIU,EAAe,gBAAiB,CACvC,aAAc,MACd,aAAc,GAC1B,CAAa,EACTV,EAAS,QAAO,EAChBW,GACD,OAAQC,EAAP,CACAC,EAAS,MAAM,CACb,MAAO,GACP,QAASD,EAAM,QACf,SAAU,UAChB,CAAK,EACDN,GACJ,QAAY,CACRZ,EAAW,MAAK,EAChBoB,GACD,CACH,CAEA,eAAef,GAAW,CACxBE,IACAK,IACAD,IAEA,GAAI,CACF,MAAME,EAAO,MAAMC,EAAcL,CAAW,EAC5CP,EAAY,mBAAmB,YAAaa,EAAaF,EAAK,IAAI,CAAC,EACnEP,EAAS,QAAO,EAChBW,IAGA,MAAMI,EADKnB,EAAY,kBACE,wBAOzB,GALA,OAAO,SAAS,CACd,IAAKmB,EAAc,OAAS,EAC5B,SAAU,QAChB,CAAK,EAEGd,EAAOC,EAAWK,EAAK,UACzB,MAAM,IAAI,MAAM,4DAA8D,CAEjF,OAAQK,EAAP,CACAN,IACEO,EAAS,KAAK,CACZ,MAAO,GACP,QAASD,EAAM,QACf,SAAU,UAClB,CAAO,CACP,QAAY,CACRE,GACD,CACH,CAEA,eAAeN,EAAcQ,EAAO,CAehC,OAXiB,MAAMC,EAFN,2BAEsB,CACnC,OAAQ,CACJ,IALQ,qCAMR,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAAd,EACA,KAAAD,CACH,CACT,CAAK,GACe,IACpB,CAEA,SAASQ,EAAaS,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA;AAAA,0CAGvDL;AAAA;AAAA;AAAA,mBAGvBD;AAAA,mBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCASgBC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA;AAAA,mCAIAC;AAAA;AAAA;AAAA,YAGvB,EAAE,KAAK,EAAE,CACrB"}